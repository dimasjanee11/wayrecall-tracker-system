# ğŸ—„ï¸ Legacy Database Schema (Stels)

> Ğ”Ğ°Ñ‚Ğ°: 8 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ 2026
> Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº: legacy-stels (MongoDB 3.4, PostgreSQL 9.6 + PostGIS)

## ĞĞ±Ğ·Ğ¾Ñ€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Legacy Stels                         â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MongoDB 3.4 â”‚  â”‚ PostgreSQL   â”‚  â”‚  Nominatim   â”‚  â”‚
â”‚  â”‚  Seniel-dev2 â”‚  â”‚  seniel-pg   â”‚  â”‚  (PostGIS)   â”‚  â”‚
â”‚  â”‚  Ğ¿Ğ¾Ñ€Ñ‚ 27017  â”‚  â”‚  Ğ¿Ğ¾Ñ€Ñ‚ 5432   â”‚  â”‚  Ğ¿Ğ¾Ñ€Ñ‚ 5432   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ 24 ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ â”‚  â”‚ PostGIS only â”‚  â”‚ Reverse geo  â”‚  â”‚
â”‚  â”‚ + Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡.   â”‚  â”‚ (Ğ¿ÑƒÑÑ‚Ğ°Ñ)     â”‚  â”‚ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹   â”‚  â”‚
â”‚  â”‚ objPacks.*   â”‚  â”‚              â”‚  â”‚  â†’ Ğ°Ğ´Ñ€ĞµÑ     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MongoDB** â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ (Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ + GPS-Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸)
**PostgreSQL** â€” PostGIS Ğ´Ğ»Ñ Ğ³ĞµĞ¾Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (legacy Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚)
**Nominatim** â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ PostgreSQL Ğ‘Ğ” Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ³ĞµĞ¾ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ â†’ Ğ°Ğ´Ñ€ĞµÑ)

---

## 1. MongoDB (Seniel-dev2) â€” Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ‘Ğ”

### 1.1 UML-Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ÑĞ²ÑĞ·ĞµĞ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      accounts       â”‚       â”‚       tariffs        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId       â”‚â”€â”€â”    â”‚ _id: ObjectId       â”‚
â”‚ name: String        â”‚  â”‚    â”‚ name: String         â”‚
â”‚ default: Boolean    â”‚  â”‚    â”‚ comment: String      â”‚
â”‚ plan: ObjectId â”€â”€â”€â”€â”€â”‚â”€â”€â”‚â”€â”€â”€â–¶â”‚ abonentPrice: [{     â”‚
â”‚ balance: Number     â”‚  â”‚    â”‚   name, comment, costâ”‚
â”‚ comment: String     â”‚  â”‚    â”‚ }]                   â”‚
â”‚ blocked: Boolean    â”‚  â”‚    â”‚ additionalAbonent... â”‚
â”‚ blockedReason: Str  â”‚  â”‚    â”‚ servicePrice: [...]  â”‚
â”‚ billingType: String â”‚  â”‚    â”‚ hardwarePrice: [...] â”‚
â”‚ lastCalcDate: Date  â”‚  â”‚    â”‚ messageHistoryLen..  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ default: Boolean     â”‚
         â–²               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚
         â”‚ accountId     â”‚
         â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       users         â”‚  â”‚    â”‚    billingRoles      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId       â”‚  â”‚    â”‚ _id: ObjectId       â”‚
â”‚ name: String        â”‚  â”‚    â”‚ name: String         â”‚
â”‚ password: String    â”‚  â”‚    â”‚ description: String  â”‚
â”‚ enabled: Boolean    â”‚  â”‚    â”‚ permissions: [Str]   â”‚
â”‚ roles: [String]     â”‚â”€â”€â”‚â”€â”€â”€â–¶â”‚ authorities: [Str]   â”‚
â”‚ accountId: ObjId â”€â”€â”€â”‚â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ lastLoginDate: Date â”‚
â”‚ groups: [{          â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   name, objectIds   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  (Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ²   â”‚
â”‚ }]                  â”‚       â”‚   Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹ Ğ² users)  â”‚
â”‚ settings: {...}     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ userId (Ğ² usersPermissions)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  usersPermissions   â”‚       â”‚      objects         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId       â”‚       â”‚ _id: ObjectId       â”‚
â”‚ userId: ObjectId    â”‚       â”‚ uid: String (unique) â”‚
â”‚ objectIds: [ObjId]  â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ name: String         â”‚
â”‚ permissions: {...}  â”‚       â”‚ customName: String   â”‚
â”‚   canBlock: Bool    â”‚       â”‚ accountId: ObjectId  â”‚
â”‚   canView: Bool     â”‚       â”‚ comment: String      â”‚
â”‚   canFuel: Bool     â”‚       â”‚ blocked: Boolean     â”‚
â”‚   canTrips: Bool    â”‚       â”‚ disabled: Boolean    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ equipment: [{        â”‚
                              â”‚   eqIMEI, model,     â”‚
                              â”‚   simNumber, type    â”‚
                              â”‚ }]                   â”‚
                              â”‚ settings: {          â”‚
                              â”‚   trips, fuel, view, â”‚
                              â”‚   imgSource, sensors â”‚
                              â”‚ }                    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚ uid
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  objPacks.o{uid}    â”‚
                              â”‚  (Ğ”Ğ˜ĞĞĞœĞ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ•!)    â”‚
                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                              â”‚ uid: String          â”‚
                              â”‚ imei: String         â”‚
                              â”‚ time: Date           â”‚
                              â”‚ lon: Double          â”‚
                              â”‚ lat: Double          â”‚
                              â”‚ spd: Short (ÑĞºĞ¾Ñ€.)   â”‚
                              â”‚ crs: Short (ĞºÑƒÑ€Ñ)    â”‚
                              â”‚ stn: Byte (ÑĞ¿ÑƒÑ‚Ğ½.)   â”‚
                              â”‚ pn: String (Ğ°Ğ´Ñ€ĞµÑ)   â”‚
                              â”‚ insTime: Date        â”‚
                              â”‚ data: {sensors...}   â”‚
                              â”‚ privateData: {...}   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              ĞŸĞ¾ 1 ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ğ½Ğ° Ğ¾Ğ±ÑŠĞµĞºÑ‚!
                              Ğ˜Ğ½Ğ´ĞµĞºÑ: (time:-1, lon:1, lat:1)
```

### 1.2 Ğ’ÑĞµ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ MongoDB

| ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-----------|-----------|------------|
| `accounts` | 1 | Ğ£Ñ‡Ñ‘Ñ‚Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ (ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹) |
| `users` | 1 | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (Ğ»Ğ¾Ğ³Ğ¸Ğ½ Ğ² Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³) |
| `tariffs` | 1 | Ğ¢Ğ°Ñ€Ğ¸Ñ„Ğ½Ñ‹Ğµ Ğ¿Ğ»Ğ°Ğ½Ñ‹ |
| `objects` | 0 | ĞĞ±ÑŠĞµĞºÑ‚Ñ‹ (Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚ Ñ Ñ‚Ñ€ĞµĞºĞµÑ€Ğ°Ğ¼Ğ¸) |
| `equipments` | 0 | ĞĞ±Ğ¾Ñ€ÑƒĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ñ‚Ñ€ĞµĞºĞµÑ€Ñ‹, Ñ€Ğ°Ğ´Ğ¸Ğ¾Ğ·Ğ°ĞºĞ»Ğ°Ğ´ĞºĞ¸) |
| `events` | 0 | Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ/ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ |
| `notificationRules` | 0 | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ |
| `notificationRulesStates` | 0 | Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» |
| `geoZonesState` | 0 | Ğ“ĞµĞ¾Ğ·Ğ¾Ğ½Ñ‹ |
| `billingRoles` | 0 | Ğ Ğ¾Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ |
| `domainEvents` | 3 | Event Sourcing Ğ»Ğ¾Ğ³ |
| `domainEventsView` | 3 | ĞŸÑ€Ğ¾ĞµĞºÑ†Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ (Ğ´Ğ»Ñ UI) |
| `snapshotEvents` | 0 | Ğ¡Ğ½Ğ°Ğ¿ÑˆĞ¾Ñ‚Ñ‹ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ğ² |
| `authlog` | 12 | Ğ›Ğ¾Ğ³ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ |
| `balanceHistoryWithDetails` | 0 | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° |
| `supportRequest` | 0 | Ğ¢Ğ¸ĞºĞµÑ‚Ñ‹ Ñ‚ĞµÑ…Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ |
| `supportNotificationEmails` | 0 | Email Ğ´Ğ»Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ |
| `smses` | 0 | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ SMS |
| `lbses` | 0 | LBS Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ğ¸) |
| `usersPermissions` | 0 | ĞŸÑ€Ğ°Ğ²Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ½Ğ° Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ |
| `usersPlayerIds` | 0 | Push-Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (OneSignal) |
| `monitoringwebapp-sessions` | 1 | Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° |
| `billingwebapp-sessions` | 1 | Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ±Ğ¸Ğ»Ğ»Ğ¸Ğ½Ğ³Ğ° |
| `workflowapp-sessions` | 0 | Ğ¡ĞµÑÑĞ¸Ğ¸ workflow |
| `objPacks.o{uid}` | Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡. | **GPS-Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸** (Ğ¿Ğ¾ 1 ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ğ½Ğ° Ğ¾Ğ±ÑŠĞµĞºÑ‚!) |

### 1.3 Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¹

#### equipments (ĞĞ±Ğ¾Ñ€ÑƒĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
```
{
  _id: ObjectId,
  eqtype: String,          // "gps-tracker", "radio-tag"
  accountId: ObjectId,     // â†’ accounts._id
  objectId: ObjectId,      // â†’ objects._id
  eqMark: String,          // ĞœĞ°Ñ€ĞºĞ°: "Teltonika", "Wialon"
  eqModel: String,         // ĞœĞ¾Ğ´ĞµĞ»ÑŒ: "FMB920", "PRO"
  eqSerNum: String,        // Ğ¡ĞµÑ€Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€
  eqIMEI: String,          // IMEI (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€)
  simNumber: String,       // ĞĞ¾Ğ¼ĞµÑ€ SIM-ĞºĞ°Ñ€Ñ‚Ñ‹
  status: String           // "active", "inactive", "stock"
}
```

#### events (Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)
```
{
  _id: ObjectId,
  eid: Long,               // ID ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
  uid: String,             // ID Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ° (â†’ objects.uid)
  type: String,            // "speed", "geofence", "sos"
  time: Date,              // Ğ’Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
  message: String,         // Ğ¢ĞµĞºÑÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
  read: Boolean,           // ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¾?
  additionalData: {...}    // Ğ”Ğ¾Ğ¿. Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹, Ğ¿Ğ¾Ñ€Ğ¾Ğ³ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸)
}
```

#### notificationRules (ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹)
```
{
  _id: ObjectId,
  name: String,            // ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°
  type: String,            // "speed", "geofence_enter", "geofence_exit", "sos"
  objectUids: [String],    // ĞĞ±ÑŠĞµĞºÑ‚Ñ‹ Ğ¿Ğ¾Ğ´ Ğ½Ğ°Ğ±Ğ»ÑĞ´ĞµĞ½Ğ¸ĞµĞ¼
  params: {                // ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
    speedLimit: Number,    // ĞŸĞ¾Ñ€Ğ¾Ğ³ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸ (Ğ´Ğ»Ñ speed)
    geozoneId: ObjectId    // Ğ“ĞµĞ¾Ğ·Ğ¾Ğ½Ğ° (Ğ´Ğ»Ñ geofence)
  },
  action: String,          // "push", "sms", "email"
  email: String,
  phone: String,
  enabled: Boolean
}
```

#### geoZonesState (Ğ“ĞµĞ¾Ğ·Ğ¾Ğ½Ñ‹)
```
{
  _id: ObjectId,
  id: Long,                // ID Ğ³ĞµĞ¾Ğ·Ğ¾Ğ½Ñ‹
  name: String,            // ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ
  ftColor: String,         // Ğ¦Ğ²ĞµÑ‚ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (#RRGGBB)
  points: [{               // ĞŸĞ¾Ğ»Ğ¸Ğ³Ğ¾Ğ½
    lat: Double,
    lon: Double
  }],
  description: String
}
```

#### supportRequest (Ğ¢Ğ¸ĞºĞµÑ‚Ñ‹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸)
```
{
  _id: ObjectId,
  subject: String,
  status: String,          // "open", "in_progress", "closed"
  priority: String,        // "low", "medium", "high"
  category: String,
  accountId: ObjectId,
  userId: ObjectId,
  messages: [{
    author: String,
    text: String,
    date: Date
  }]
}
```

#### domainEvents (Event Sourcing â€” Axon Framework)
```
{
  _id: ObjectId,
  aggregateIdentifier: String,  // UUID Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ°
  sequenceNumber: Long,         // ĞŸĞ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€
  type: String,                 // Ğ¢Ğ¸Ğ¿ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ°
  serializedPayload: String,    // XML (Axon) â€” Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ°Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
  serializedMetaData: String,   // XML â€” Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  timestamp: String,            // ISO Ğ´Ğ°Ñ‚Ğ°
  payloadType: String,          // Java class name
  payloadRevision: String
}
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ: ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ², Ğ±Ğ¸Ğ»Ğ»Ğ¸Ğ½Ğ³
// Axon Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ· Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
```

---

## 2. PostgreSQL (seniel-pg) â€” PostGIS

> âš ï¸ Ğ‘Ğ” `seniel-pg` **Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ÑƒÑÑ‚Ğ°Ñ** â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ PostGIS.
> Ğ’ legacy Stels PostgreSQL Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        seniel-pg (PostgreSQL 9.6)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ¡Ñ…ĞµĞ¼Ğ° public:                        â”‚
â”‚   â””â”€â”€ spatial_ref_sys (PostGIS)     â”‚
â”‚       srid, auth_name, auth_srid,   â”‚
â”‚       srtext, proj4text             â”‚
â”‚                                      â”‚
â”‚ Ğ¡Ñ…ĞµĞ¼Ğ° topology:                      â”‚
â”‚   â”œâ”€â”€ layer                         â”‚
â”‚   â””â”€â”€ topology                      â”‚
â”‚                                      â”‚
â”‚ âš  ĞĞµÑ‚ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†!               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Nominatim (PostGIS) â€” ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğµ Ğ³ĞµĞ¾ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

> ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ PostgreSQL Ğ‘Ğ” Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ GPS-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ² Ğ°Ğ´Ñ€ĞµÑĞ°

```
ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³: jdbc:postgresql://localhost/nominatim
ĞšĞ»Ğ°ÑÑ: DirectNominatimRegeocoder.scala
```

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: `placex`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             placex                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ place_id: BIGINT (PK)               â”‚
â”‚ osm_type: CHAR(1)  // N/W/R         â”‚
â”‚ osm_id: BIGINT                       â”‚
â”‚ class: TEXT         // building,road â”‚
â”‚ type: TEXT          // residential   â”‚
â”‚ name: HSTORE       // 'name'=>'...' â”‚
â”‚ admin_level: INT                     â”‚
â”‚ address: HSTORE                      â”‚
â”‚ extratags: HSTORE                    â”‚
â”‚ geometry: GEOMETRY  // PostGIS       â”‚
â”‚ country_code: TEXT                   â”‚
â”‚ rank_search: INT                     â”‚
â”‚ rank_address: INT                    â”‚
â”‚ importance: FLOAT                    â”‚
â”‚ parent_place_id: BIGINT              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¸Ğ· ĞºĞ¾Ğ´Ğ°:
  SELECT * FROM placex
  WHERE ST_DWithin(geometry, ST_GeomFromText('POINT(lon lat)', 4326), radius)
  ORDER BY ST_Distance(...)
```

### Ğ¢Ğ¸Ğ¿Ñ‹ GeoObject Ğ² ĞºĞ¾Ğ´Ğµ:
```scala
case class GeoObject(
  placeId: Long,
  placeType: String,     // "city", "road", "building"
  name: String,          // "ÑƒĞ». Ğ›ĞµĞ½Ğ¸Ğ½Ğ°, 15"
  geometry: Geometry      // PostGIS GEOMETRY
)
```

---

## 4. ĞĞĞ’Ğ«Ğ™ ĞŸĞ ĞĞ•ĞšĞ¢ â€” TimescaleDB (Ñ†ĞµĞ»ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)

> Ğ¤Ğ°Ğ¹Ğ»: `infra/databases/timescaledb-init.sql`

### 4.1 ER-Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    vehicles     â”‚     â”‚      devices         â”‚     â”‚  device_commands â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: BIGSERIAL PKâ”‚â—€â”€â”€â”€â”€â”‚ vehicle_id: BIGINT FKâ”‚     â”‚ time: TIMESTAMPTZâ”‚
â”‚ name: VARCHAR   â”‚     â”‚ id: BIGSERIAL PK    â”‚     â”‚ command_id: UUID â”‚
â”‚ plate_number    â”‚     â”‚ imei: VARCHAR(20) UQ â”‚â”€â”€â”€â”€â–¶â”‚ imei: VARCHAR(20)â”‚
â”‚ vehicle_type    â”‚     â”‚ name: VARCHAR        â”‚     â”‚ command_type     â”‚
â”‚ company_id      â”‚     â”‚ protocol: VARCHAR    â”‚     â”‚ command_data JSONâ”‚
â”‚ is_active: BOOL â”‚     â”‚ is_active: BOOL      â”‚     â”‚ status: VARCHAR  â”‚
â”‚ created_at      â”‚     â”‚ last_seen: TIMESTMPTZâ”‚     â”‚ sent_at          â”‚
â”‚ updated_at      â”‚     â”‚ created_at           â”‚     â”‚ ack_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚ imei                (hypertable)
        â”‚ vehicle_id               â”‚
        â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 gps_positions                    â”‚
â”‚               (HYPERTABLE â€” TimescaleDB)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ time: TIMESTAMPTZ (NOT NULL)                     â”‚
â”‚ imei: VARCHAR(20)                                â”‚
â”‚ vehicle_id: BIGINT â†’ vehicles.id                 â”‚
â”‚ latitude: DOUBLE PRECISION                       â”‚
â”‚ longitude: DOUBLE PRECISION                      â”‚
â”‚ altitude: DOUBLE PRECISION                       â”‚
â”‚ speed: DOUBLE PRECISION                          â”‚
â”‚ heading: DOUBLE PRECISION                        â”‚
â”‚ satellites: INTEGER                              â”‚
â”‚ hdop: DOUBLE PRECISION                           â”‚
â”‚ is_moving: BOOLEAN                               â”‚
â”‚ is_valid: BOOLEAN                                â”‚
â”‚ protocol: VARCHAR(20)                            â”‚
â”‚ raw_data: JSONB                                  â”‚
â”‚ location: GEOMETRY(POINT, 4326)  â€” PostGIS!      â”‚
â”‚                                                   â”‚
â”‚ Chunk interval: 1 day                            â”‚
â”‚ Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹: (imei, time DESC), (vehicle_id, time)   â”‚
â”‚          GIST(location)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    geozones     â”‚     â”‚     geozone_events      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: BIGSERIAL PKâ”‚â—€â”€â”€â”€â”€â”‚ geozone_id: BIGINT FK   â”‚
â”‚ name: VARCHAR   â”‚     â”‚ time: TIMESTAMPTZ       â”‚
â”‚ zone_type       â”‚     â”‚ event_id: UUID          â”‚
â”‚ geometry: GEOM  â”‚     â”‚ vehicle_id: BIGINT FK   â”‚
â”‚  (POLYGON,4326) â”‚     â”‚ event_type: VARCHAR     â”‚
â”‚ company_id      â”‚     â”‚  ("enter"/"exit")       â”‚
â”‚ is_active: BOOL â”‚     â”‚ latitude: DOUBLE        â”‚
â”‚ created_at      â”‚     â”‚ longitude: DOUBLE       â”‚
â”‚ updated_at      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          (hypertable)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      daily_device_stats                      â”‚
â”‚   (CONTINUOUS AGGREGATE â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bucket: DATE (1 day)                         â”‚
â”‚ imei: VARCHAR                                â”‚
â”‚ total_points: COUNT(*)                       â”‚
â”‚ avg_speed: AVG(speed)                        â”‚
â”‚ max_speed: MAX(speed)                        â”‚
â”‚ first_point: FIRST(time, time)               â”‚
â”‚ last_point: LAST(time, time)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³: Legacy MongoDB â†’ ĞĞ¾Ğ²Ñ‹Ğ¹ TimescaleDB

| Legacy (MongoDB) | ĞĞ¾Ğ²Ñ‹Ğ¹ (TimescaleDB/PostgreSQL) | ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ |
|---|---|---|
| `objPacks.o{uid}` | `gps_positions` (hypertable) | 1 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ²Ğ¼ĞµÑÑ‚Ğ¾ N ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¹! |
| `objects` | `vehicles` + `devices` | Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ: Ğ¢Ğ¡ Ğ¸ Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ |
| `equipments` | `devices` | IMEI, Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ», ÑÑ‚Ğ°Ñ‚ÑƒÑ |
| `accounts` | ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ `user-service` | Multi-tenant Ñ‡ĞµÑ€ĞµĞ· company_id |
| `users` | Auth Service (JWT + Redis) | Ğ’Ğ¼ĞµÑÑ‚Ğ¾ MongoDB-ÑĞµÑÑĞ¸Ğ¹ |
| `tariffs` | Billing Service | ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ |
| `events` | `geozone_events` + Kafka topics | Event-driven Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° |
| `notificationRules` | Notification Service (Kafka) | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· rule-checker |
| `geoZonesState` | `geozones` (PostGIS POLYGON) | ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ PostGIS Ğ²Ğ¼ĞµÑÑ‚Ğ¾ JSON-Ñ‚Ğ¾Ñ‡ĞµĞº |
| `domainEvents` | Kafka topics (event log) | Kafka Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Axon Framework |
| `authlog` | Auth Service + Kafka audit | Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚ |
| `supportRequest` | ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚Ğ¸ĞºĞµÑ‚-ÑĞµÑ€Ğ²Ğ¸Ñ | Ğ˜Ğ»Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Jira/Zendesk |
| Nominatim (PostGIS) | Nominatim API (ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€) | Ğ¢Ğ¾Ñ‚ Ğ¶Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´, Ğ½Ğ¾ Ğ² Docker |

---

## 6. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ¸Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€

### Legacy (MongoDB-centric)
- **Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ‘Ğ”** (MongoDB Seniel-dev2)
- GPS-Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸: **Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¾Ğ±ÑŠĞµĞºÑ‚** (`objPacks.o{uid}`)
- Event Sourcing Ñ‡ĞµÑ€ĞµĞ· **Axon Framework** (XML-ÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
- Ğ“ĞµĞ¾Ğ·Ğ¾Ğ½Ñ‹: Ğ¼Ğ°ÑÑĞ¸Ğ² Ñ‚Ğ¾Ñ‡ĞµĞº `[{lat, lon}]` (Ğ±ĞµĞ· Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²)
- ĞĞ´Ñ€ĞµÑĞ°: **Nominatim** (Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ PostgreSQL Ñ PostGIS)

### ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ (TimescaleDB + Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
- **Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹** Ñ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ°Ğ¼Ğ¸
- GPS-Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸: **Ğ¾Ğ´Ğ½Ğ° hypertable** Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- Events Ñ‡ĞµÑ€ĞµĞ· **Kafka** (Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Axon)
- Ğ“ĞµĞ¾Ğ·Ğ¾Ğ½Ñ‹: **PostGIS POLYGON** Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ğ¼Ğ¸ GIST
- Continuous aggregates Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ)
- **10,000+ Ñ‚Ğ¾Ñ‡ĞµĞº/ÑĞµĞº** (Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ~100 Ğ² legacy)
