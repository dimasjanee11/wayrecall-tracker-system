# üñ•Ô∏è –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥ TrackerGPS –Ω–∞ HP DL180 G6

## üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

### –ñ–µ–ª–µ–∑–æ
- **–ú–æ–¥–µ–ª—å:** HP ProLiant DL180 G6 (2U rack server)
- **CPU:** Intel Xeon L5520 @ 2.27GHz (16 –ø–æ—Ç–æ–∫–æ–≤)
- **RAM:** 7.7GB DDR3 ECC
- **Storage:**
  - –°–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏—Å–∫: 100GB (sda)
  - RAID0 –º–∞—Å—Å–∏–≤: 8.2TB (md0) ‚Üí `/mnt/raid`
- **Network:** 192.168.1.5 (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å)

### –î–æ—Å—Ç—É–ø
- **Hostname:** freenaumen
- **SSH:** `wogulis@192.168.1.5`
- **SSH Alias:** `ssh server`
- **SSH Key:** id_ed25519 (–Ω–∞—Å—Ç—Ä–æ–µ–Ω)

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **–û–°:** Ubuntu 24.04.3 LTS
- **Docker:** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **Docker Compose:** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ: –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cd ~/repos/wayrecall-tracker-system-template
cp test-stand/.env.example test-stand/.env
nano test-stand/.env  # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–æ–ª–∏

# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
./test-stand/scripts/initial-setup.sh
```

### 2. –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –î–µ–ø–ª–æ–π –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
./test-stand/scripts/deploy.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./test-stand/scripts/status.sh
```

### 3. –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã:

| –°–µ—Ä–≤–∏—Å | URL | Credentials |
|--------|-----|-------------|
| Grafana | http://192.168.1.5:3000 | admin / —Å–º. .env |
| Prometheus | http://192.168.1.5:9090 | - |
| Kafka UI | http://192.168.1.5:8080 | - |
| PostgreSQL | 192.168.1.5:5432 | tracker / —Å–º. .env |
| Redis | 192.168.1.5:6379 | - |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ test-stand

```
test-stand/
‚îú‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .env.example                 # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env                         # –†–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è!)
‚îú‚îÄ‚îÄ docker-compose.prod.yml      # Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ credentials.md               # –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–∞—Ä–æ–ª–∏
‚îú‚îÄ‚îÄ api-endpoints.md             # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ monitoring-guide.md          # –ì–∞–π–¥ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É
‚îú‚îÄ‚îÄ backup-strategy.md           # –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ initial-setup.sh         # –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh                # –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ rollback.sh              # –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ status.sh                # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ backup.sh                # –°–æ–∑–¥–∞–Ω–∏–µ backup
‚îÇ   ‚îú‚îÄ‚îÄ restore.sh               # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
‚îÇ   ‚îú‚îÄ‚îÄ logs.sh                  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ cleanup.sh               # –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îî‚îÄ‚îÄ systemd/
    ‚îî‚îÄ‚îÄ tracker-infra.service    # Systemd unit –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
```

---

## üìä –†–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | RAM | CPU | Disk |
|-----------|-----|-----|------|
| Redis | 150MB | 5% | 1GB |
| Kafka + ZooKeeper | 1.5GB | 15% | 10GB |
| TimescaleDB | 600MB | 10% | 50GB+ |
| Connection Manager | 500MB | 20% | 1GB |
| History Writer | 500MB | 15% | 1GB |
| Device Manager | 400MB | 10% | 1GB |
| Prometheus | 200MB | 5% | 5GB |
| Grafana | 150MB | 5% | 1GB |
| **–ò–¢–û–ì–û** | **~4GB** | **85%** | **70GB** |

**–û—Å—Ç–∞—Ç–æ–∫:** 3.7GB RAM, 15% CPU, 30GB —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏—Å–∫, 8.2TB RAID –º–∞—Å—Å–∏–≤

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Firewall (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
sudo ufw allow 22/tcp        # SSH
sudo ufw allow 3000/tcp      # Grafana
sudo ufw allow 9090/tcp      # Prometheus
sudo ufw allow 5432/tcp      # PostgreSQL (—Ç–æ–ª—å–∫–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)
sudo ufw enable
```

### –ü–∞—Ä–æ–ª–∏

–í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `test-stand/.env` –∏ `test-stand/credentials.md`.

**–í–ê–ñ–ù–û:** –§–∞–π–ª `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

---

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./test-stand/scripts/logs.sh

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
./test-stand/scripts/logs.sh kafka

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ —Å –æ—à–∏–±–∫–∞–º–∏
./test-stand/scripts/logs.sh --tail 100 --filter error
```

### Backup

```bash
# –°–æ–∑–¥–∞—Ç—å backup
./test-stand/scripts/backup.sh

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
./test-stand/scripts/restore.sh 2026-01-23_backup.tar.gz
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ GitHub
./test-stand/scripts/deploy.sh

# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
./test-stand/scripts/rollback.sh
```

---

## üêõ Troubleshooting

### –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Docker
ssh server 'sudo systemctl status docker'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
./test-stand/scripts/logs.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë
ssh server 'cd projects/wayrecall-tracker-system && docker compose -f test-stand/docker-compose.prod.yml restart'
```

### –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
ssh server 'free -h'
ssh server 'docker stats --no-stream'

# –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
ssh server 'docker system prune -a'
```

### RAID –º–∞—Å—Å–∏–≤ –Ω–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω

```bash
ssh server 'sudo mount /dev/md0 /mnt/raid'
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `/test-stand/*.md`
- **–õ–æ–≥–∏:** `/mnt/raid/logs/`
- **Backups:** `/mnt/raid/backups/`
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** http://192.168.1.5:3000

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ SSH
- [ ] RAID –º–∞—Å—Å–∏–≤ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] –°–æ–∑–¥–∞–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –§–∞–π–ª `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ó–∞–ø—É—â–µ–Ω `initial-setup.sh`
- [ ] –ó–∞–ø—É—â–µ–Ω `deploy.sh`
- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"
- [ ] Grafana –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (systemd)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω firewall
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω backup
